/*!
* tracker v1.0.0
*
* Copyright 2021, xszi
*
*/
var Tracker=function(){"use strict";var n=function(e){throw new TypeError('"'+e+'" is read-only')};var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===a.call(e)}function s(e){if(e&&"[object Object]"===a.call(e)){var t,n=i.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&i.call(e.constructor.prototype,"isPrototypeOf");if(!e.constructor||n||o){for(t in e);return void 0===t||i.call(e,t)}}}function f(e,t){c&&"__proto__"===t.name?c(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue}function d(e,t){if("__proto__"===t){if(!i.call(e,t))return;if(u)return u(e,t).value}return e[t]}function h(){var e,t,n,o,r,i=arguments[0],a=1,c=arguments.length,u=!1;for("boolean"==typeof i&&(u=i,i=arguments[1]||{},a=2),(null==i||"object"!=typeof i&&"function"!=typeof i)&&(i={});a<c;++a)if(null!=(e=arguments[a]))for(t in e)r=d(i,t),i!==(n=d(e,t))&&(u&&n&&(s(n)||(o=l(n)))?(r=o?(o=!1,r&&l(r)?r:[]):r&&s(r)?r:{},f(i,{name:t,newValue:h(u,r,n)})):void 0!==n&&f(i,{name:t,newValue:n}));return i}var r=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e},i=Object.prototype.hasOwnProperty,a=Object.prototype.toString,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor;function p(e,t){var n=1<arguments.length&&void 0!==t&&t;if(!(e instanceof HTMLElement))return console.warn("input is not a HTML element!"),"";for(var o=[],r=e;r;){var i=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=[];if(!e||!e.tagName)return"";if(e.id)return"#".concat(e.id);{var o;n.push(e.tagName.toLowerCase()),t&&(o=e.className)&&"string"==typeof o&&(o=o.split(/\s+/),n.push(".".concat(o.join("."))))}e.name&&n.push("[name=".concat(e.name,"]"));return n.join("")}(r,n);if(!i)break;if(o.unshift(i),v(o.join(">"))===e||0<=i.indexOf("body"))break;o.shift();var a=r.parentNode.children;if(1<a.length)for(var c=0;c<a.length;c++)if(a[c]===r){i+=":nth-child(".concat(c+1,")");break}if(o.unshift(i),v(o.join(">"))===e)break;r=r.parentNode}return o.join(">")}function v(e){return document.getElementById(e)||document.getElementsByName(e)[0]||document.querySelector(e)}var y={useClass:!1,per:.01,events:["click"]};return new(function(){function e(){t(this,e),this._isInstall=!1,this._options={}}return r(e,[{key:"config",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(e=h(!0,{},y,e)).event=y.event,this._options=e,this}},{key:"_captureEvents",value:function(){for(var e,t,n,o=this,r=this._options.events,i=(e="addEventListener",t="removeEventListener",n="",window.addEventListener||(e="attachEvent",t="detachEvent",n="on"),{addMethod:e,removeMethod:t,prefix:n}),a=0,c=r.length;a<c;a++){var u=r[a];document.body[i.addMethod](i.prefix+u,function(e){(e=(e=e)||window.event)&&(e.target||(e.target=e.srcElement),e.currentTarget||(e.currentTarget=e.srcElement));e&&o._handleEvent(e)},!1)}}},{key:"_handleEvent",value:function(e){var t,n,o,r,i,a=parseFloat(this._options.per);this.hit(a)&&(t=p(e.target,this._options.useClass),r=e.target,n=r.getBoundingClientRect(),o=n.width||n.right-n.left,r=n.heigth||n.bottom-n.top,0!=(i=h({},n,{width:o,heigth:r})).width&&0!=i.height&&(n=((a=document.documentElement||document.body.parentNode)&&"number"==typeof a.scrollLeft?a:document.body).scrollLeft,o=(a&&"number"==typeof a.scrollTop?a:document.body).scrollTop,r=e.pageX||e.clientX+n,a=e.pageY||e.clientY+o,i={domPath:encodeURIComponent(t),trackingType:e.type,offsetX:((r-i.left-n)/i.width).toFixed(6),offsetY:((a-i.top-o)/i.height).toFixed(6)},this.send(i)))}},{key:"send",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};console.log("data",e);var t=new Image(1,1);t.onload=function(){n("image"),t=null},t.src="/?".concat(function(e){var t,n=[];for(t in e)n.push("".concat(t,"=").concat(e[t]));return n.join("&")}(e))}},{key:"hit",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.01;return Math.random()<e}},{key:"install",value:function(){return this._isInstall||(this._captureEvents(),this._isInstall=!0),this}}]),e}())}();
//# sourceMappingURL=tracker.min.js.map
